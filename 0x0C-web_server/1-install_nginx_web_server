#!/usr/bin/env bash
# Install an nginx web server software on a new Ubuntu os server

# Install any ubuntu updates
sudo apt -y update
sudo apt -y upgrade

# Server software installations
sudo apt -y --fix-missing install nginx  # add --allow-downgrades flag when reverting upgrade
sudo apt-get -y --fix-missing install ufw  # add --allow-downgrades flag when reverting upgrade

# Allow nginx to pass through firewall
sudo ufw allow 'Nginx HTTP'

# Edit default page
sudo chmod -R 755 /var/www/html  # ensure file has required permissions
echo "Hello World!" | sudo tee  /var/www/html/index.nginx-debian.html  > /dev/null  # Page must only serve "Hello World" string

# Reload/Start Nginx to apply changes
sudo nginx -s reload
